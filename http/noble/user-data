#cloud-config
autoinstall:
  version: 1
  reporting:
    hook:
      type: webhook
      endpoint: http://159.65.126.80:8090/log
#    early-commands:
#        - ping -c1 198.162.1.1
  locale: en_US
  keyboard:
    layout: us
  network:
    network:
      version: 2
      ethernets:
        eth0:
          dhcp4: yes
    # proxy: http://squid.internal:3128/
    # apt:
    #     primary:
    #         - arches: [default]
    #           uri: http://repo.internal/
    #     sources:
    #         my-ppa.list:
    #             source: "deb http://ppa.launchpad.net/curtin-dev/test-archive/ubuntu $RELEASE main"
    #             keyid: B59D 5F15 97A5 04B7 E230  6DCA 0620 BBCF 0368 3F77
    # storage:
    #     layout:
    #         name: lvm
  identity:
      hostname: packerubuntu
      username: admin
      password: $6$OJcm.7n9o62RqLEl$iYVzReRGY6ExYbPb6ql/xeo56y5IUVR/GjN7JMlO.C3hsQwxgwmFe9M0J3Ea2N.wzbHraZzr69adTDvA0WeyF/
  ssh:
      install-server: yes
        # authorized-keys:
        #   - $key
      allow-pw: yes
    # snaps:
    #     - name: go
    #       channel: 1.20/stable
    #       classic: true
    # debconf-selections: |
    #     bind9      bind9/run-resolvconf    boolean false
    # packages:
    #     - libreoffice
    #     - dns-server^
  user-data:
      disable_root: false
    # late-commands:
    #     - sed -ie 's/GRUB_TIMEOUT=.*/GRUB_TIMEOUT=30/' /target/etc/default/grub
    # error-commands:
    #     - tar c /var/log/installer | nc 192.168.0.1 1000

# autoinstall:
#   version: 1
#   locale: en_US
#   keyboard:
#     layout: us
#   # configuration for password access
#   ssh:
#     install-server: true
#     allow-pw: true
#   late-commands:
#     - |
#       if [ -d /sys/firmware/efi ]; then
#         apt-get install -y efibootmgr
#         efibootmgr -o $(efibootmgr | perl -n -e '/Boot(.+)\* Ubuntu/ && print $1')
#       fi
#   user-data:
#     preserve_hostname: false
#     hostname: packerubuntu
#     package_upgrade: true
#     timezone: Europe/Berlin
#     chpasswd:
#       expire: true
#       list:
#         - admin:packerubuntu
#         - user1:packerubuntu
#     users:
#       - name: admin
#         passwd: $6$hQg57EkPBTIY0fvp$0P8Cnbj2NsGL09FlgYakZWEsy9OmkNKgpXA7p9rSk/DUaeFGHCwmz7ZoAl28sc/5WuJ92HFMk1sTbSE42xFaD0
#         groups: [adm, cdrom, dip, plugdev, lxd, sudo]
#         lock_passwd: false
#         sudo: ALL=(ALL) NOPASSWD:ALL
#         shell: /bin/bash
#       - name: user1
#         plain_text_passwd: packerubuntu
#         lock_passwd: false
#         shell: /bin/bash
